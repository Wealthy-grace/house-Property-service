#spring.application.name=Property-Service
#server.port=8082
#
## Database
#spring.datasource.url=jdbc:postgresql://localhost:5432/property-service
#spring.datasource.username=postgres
#spring.datasource.password=Server123@
#spring.datasource.driver-class-name=org.postgresql.Driver
#
## JPA
#spring.jpa.hibernate.ddl-auto=update
#spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
#
#spring.main.allow-bean-definition-overriding=true
#
## JWT Configuration - MUST MATCH USER SERVICE EXACTLY
#spring.app.jwtSecret=mySecretKey123912738aopsgjnspkmndfsopkvajoirjg94gf2opfng2moknm
#spring.app.jwtExpirationMs=3000000
#
## Actuator
#management.endpoints.web.exposure.include=health,info
#management.endpoint.health.show-details=always
#
## Logging
#logging.level.root=INFO
#logging.level.com.example.propertyservice=DEBUG
#logging.level.org.springframework.security=DEBUG


# Test Configuration

#========================================================================
# PROPERTY SERVICE - APPLICATION CONFIGURATION
# ========================================================================

spring.application.name=Property-Service
server.port=8082

# ========================================================================
# DATABASE CONFIGURATION
# ========================================================================

spring.datasource.url=jdbc:postgresql://localhost:5432/property-service
spring.datasource.username=postgres
spring.datasource.password=Server123@
spring.datasource.driver-class-name=org.postgresql.Driver

# ========================================================================
# JPA / HIBERNATE CONFIGURATION
# ========================================================================

spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

spring.main.allow-bean-definition-overriding=true

# ========================================================================
# KEYCLOAK CONFIGURATION (OAuth2 Resource Server)
# ========================================================================
# IMPORTANT: This replaces the old JWT secret configuration!
# Property service now validates tokens via Keycloak

# Keycloak server URL
keycloak.auth-server-url=http://localhost:8080

# Realm name
keycloak.realm=friendly-housing

# OAuth2 Resource Server configuration
#spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8090/realms/friendly-housing
#spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://localhost:8080/realms/friendly-housing/protocol/openid-connect/certs

spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8090/realms/friendly-housing
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://localhost:8090/realms/friendly-housing/protocol/openid-connect/certs



# ========================================================================
# LOGGING CONFIGURATION
# ========================================================================

logging.level.root=INFO
logging.level.com.example.propertyservice=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.oauth2=DEBUG

# Disable Spring Cloud compatibility check
spring.cloud.compatibility-verifier.enabled=false


# ========================================================================
# PROMETHEUS & MONITORING CONFIGURATION
# ========================================================================

management.endpoints.web.exposure.include=health,info,metrics,prometheus,circuitbreakers
management.endpoint.health.show-details=always
management.endpoint.prometheus.enabled=true
# ? CORRECT (Properties syntax)
management.metrics.distribution.slos.http.server.requests=50ms,100ms,200ms,400ms,800ms,1s,2s,5s
management.metrics.distribution.percentiles.http.server.requests=0.5,0.95,0.99

management.metrics.tags.application=${spring.application.name}
management.metrics.tags.service=property-service

# PostgreSQL connection pool metrics
management.metrics.enable.hikaricp=true
management.metrics.jdbc.datasource-proxy.enabled=true

# RabbitMQ metrics
management.metrics.rabbitmq.enabled=true